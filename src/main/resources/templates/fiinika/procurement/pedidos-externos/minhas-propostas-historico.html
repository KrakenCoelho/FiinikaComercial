<!DOCTYPE html><!--  Last Published: Fri Jul 12 2024 13:58:39 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="66907ce5d0076e4fc45c37e4" data-wf-site="667ada12e2b008b7d4b9eee9">
<head>
  <meta charset="utf-8">
  <title>Minhas propostas historico</title>
  <meta content="Minhas propostas historico" property="og:title">
  <meta content="Minhas propostas historico" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="../../../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../../../css/components.css" rel="stylesheet" type="text/css">
  <link href="../../../css/fiinika-comercial-app.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Inter:300,regular,500,600,700","Barlow:100,200,300,regular,500,600,700,800,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../../../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../../../images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="mother-div">
    <div class="page-content-wrapper">
       <div th:insert="/fragments/menuAdmin :: menuAdmin"></div>  
      <div class="content">
        <section class="criar-page-section">
          <div class="container">
            <div class="top-section-navigation">
              <a href="javascript:history.back()" class="seta-para-tras w-inline-block">
                <div class="text-block-129">q</div>
              </a>
              <div class="titulo">
                <div class="text-block-130">Minhas propostas<br></div>
              </div>
            </div>
            <div class="form-section _5">
              <div class="form-wrapper w-form">
                <form id="wf-form-Criar-Fatura" name="wf-form-Criar-Fatura" data-name="Criar Fatura" method="get" class="form" data-wf-page-id="66907ce5d0076e4fc45c37e4" data-wf-element-id="2f7a6e99-ac43-fcf9-5cd8-9ec338d9abf1">
                  <div class="form-section">
                    <div class="table">
                      <div class="table-utility-row">
                        <div class="form-field-wrapper wrap-search _10">
                          <div class="search-field-wrapper">
                          <input class="form-search-field w-input" maxlength="256" name="search" data-name="search" placeholder="Pesquisar..." type="text" id="search">
                            <div class="search-icon">
                              <div class="icon">
                                <div class="main-font-icon smaller-icon">x</div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="table-main-button-wrapper">
                          <div class="button main">
                            <div class="left-icon-wrapper">
                              <div class="icon left-icon">
                                <div class="main-font-icon">add</div>
                              </div>
                            </div>
                            <div class="button-text">Criar Fatura</div>
                            <a href="#" class="button-link w-inline-block"></a>
                          </div>
                        </div>
                        <div class="div-block-108">
                          <div class="w-layout-grid grid-18">
                          <select  onchange="filtro()" id="estado" name="estado" data-name="Field 2" class="form-text-field whitex w-select">
                              <option value="">Estado...</option>
                              <option th:each="e:${estado}" th:value="${e[0]}">[[${e[0]}]]</option>
                          
                            </select>
                            <select  onchange="filtro()" id="ano" name="ano" data-name="Field 2" class="form-text-field whitex w-node-_2d82f20a-7a30-6959-b815-28e9a1a6ea28-c45c37e4 w-select">
                              <option value="">Ano...</option>
                             <option th:each="a:${ano}" th:value="${a[0]}">[[${a[0]}]]</option>
                     
                            </select>
                            <select  onchange="filtro()" id="mes" name="mes" data-name="Field 2" class="form-text-field whitex w-node-_1fd7dd24-1813-dd33-51a0-1d7dcab02a12-c45c37e4 w-select">
                              <option value="">Mês...</option>
                            <option  th:each="m:${mes}" th:value="${m[0]}">[[${#dates.format(m[1],'MMMM')}]]</option>
                      
                            </select></div>
                        </div>
                      </div>
                      <div class="table-row cell-label-wrapper"><label class="w-checkbox table-checkbox-wrapper">
                          <div class="w-checkbox-input w-checkbox-input--inputType-custom table-checkbox"></div><input type="checkbox" name="checkbox-2" id="checkbox-2" data-name="Checkbox 2" style="opacity:0;position:absolute;z-index:-1"><span class="checkbox-lable hidden w-form-label" for="checkbox-2">Checkbox</span>
                        </label>
                        <div class="table-row-content">
                          <div class="cell-label _10">
                            <div class="table-cell-text">REF</div>
                          </div>
                          <div class="cell-label _25">
                            <div class="table-cell-text">Nome</div>
                          </div>
                          <div class="cell-label _20">
                            <div class="table-cell-text">Início do concurso</div>
                          </div>
                          <div class="cell-label _25">
                            <div class="table-cell-text">Fim do concurso</div>
                          </div>
                          <div class="cell-label _15">
                            <div class="table-cell-text">Estado</div>
                          </div>
                        </div>
                      </div> 
                      <div id="evx">
                      <div th:each="p:${td}"  class="table-row produtos"><label class="w-checkbox table-checkbox-wrapper _2">
                          <div class="w-checkbox-input w-checkbox-input--inputType-custom table-checkbox"></div><input type="checkbox" name="checkbox-2" id="checkbox-2" data-name="Checkbox 2" style="opacity:0;position:absolute;z-index:-1"><span class="checkbox-lable hidden w-form-label" for="checkbox-2">Checkbox</span>
                        </label>
                        <a  th:with="te=${T(com.ao.fiinikacomercial.funcoes.Funcoes).Codifica(p[0])}"   th:href="'/fiinika/procurement/pedidos-externos/minha-proposta-resultado/'+ ${te}+'/'+${p[6]} " class="table-row-content item-link w-inline-block">
                          <div class="table-cell _10 i">
                            <div class="table-cell-text">#[[${#numbers.formatDecimal(p[0],4,0)}]]</div>
                          </div>
                          <div class="table-cell _25">
                            <div class="table-cell-text">[[${p[1]}]] </div>
                          </div>
                          <div class="table-cell _20">
                            <div class="table-cell-text">[[${#dates.format(p[3], 'dd/MM/yyyy')}]]</div>
                          </div>
                          <div class="table-cell _25 i">
                            <div class="table-cell-text">[[${#dates.format(p[4], 'dd/MM/yyyy')}]]</div>
                          </div>
                          <div class="table-cell _15">
                            <div th:if="${p[5]=='Rejeitado'|| p[5]=='Cancelado'}" class="status-wrapper cancelado">
                              <div class="status-text">REJEITADO</div>
          					 </div>
          					 <div th:if="${p[5]=='Pago'|| p[5]=='Entregue'}" class="status-wrapper pago">
                              <div class="status-text">PAGO</div>
                            </div>
                             <div th:if="${p[5]}=='Selecionado'" class="status-wrapper factura">
                              <div class="status-text">SELECIONADO</div>
                            </div>
                            <div th:if="${p[5]}=='Pendente'" class="status-wrapper nao-pago">
                              <div class="status-text">PENDENTE</div>
                            </div>
                          </div>
                        </a>
                        <div class="table-row-action-button-wrapper">
                         
                        </div>
                      </div>
             
                 	</div>
                    </div>
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form.</div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
  <div class="close-flyout"></div>
  <div class="not-valid">
    <div class="text-block-116">Dimensão de ecrã não suportada...</div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=667ada12e2b008b7d4b9eee9" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../../../js/fiinika-comercial-app.js" type="text/javascript"></script>
  <script th:inline="javascript">
  
   /*<![CDATA[*/    

	var empresa_id = /*[[${idEmpresa}]]*/ 'default' ;
	/*]]>*/
   
   
   $('#search').keyup(function(){filtro()})
   
   function filtro(){
	
	
	var search = document.getElementById("search").value
	var ano = document.getElementById("ano").value
	var mes = document.getElementById("mes").value
	var estado = document.getElementById("estado").value


	
	var htmle = ""
	 var url = "/propostas/procurar/";
	 $.ajax({
       type: "POST",
       url: url,
       data: {'empresa_id':empresa_id,'search':search, 'ano':ano, 'mes':mes, 'estado_proposta':estado},
       success: function(data){
    	   
    	   		if(data.length>0){
    	     	   $(data).each(function(i, proposta){
    	     		  
    	     		   //alert(evento[0])	
    	     		 // var er =format(evento[4]);
    	     		  var re = window.btoa(proposta[0]);
    	     		  //var ima = "/upload/evento/"+evento[1]
					
					htmle +='<div class="table-row produtos"><label class="w-checkbox table-checkbox-wrapper _2">'
	                        +'<div class="w-checkbox-input w-checkbox-input--inputType-custom table-checkbox"></div><input type="checkbox" name="checkbox-2" id="checkbox-2" data-name="Checkbox 2" style="opacity:0;position:absolute;z-index:-1"><span class="checkbox-lable hidden w-form-label" for="checkbox-2">Checkbox</span>'
	                        +'</label>'
	                        +'<a href="/fiinika/procurement/pedidos-externos/minha-proposta-resultado/'+re+'" class="table-row-content item-link w-inline-block">'
	                        +'<div class="table-cell _10 i">'
	                        +'<div class="table-cell-text">#'+proposta[0]+'</div>'
	                        +'</div>'
	                        +'<div class="table-cell _25">'
	                        +'<div class="table-cell-text">'+proposta[1]+'</div>'
	                        +'</div>'
	                        +'<div class="table-cell _20">'
	                        +'<div class="table-cell-text">'+converteData(proposta[3])+'</div>'
	                        +'</div>'
	                        +'<div class="table-cell _25 i">'
	                        +'<div class="table-cell-text">'+converteData(proposta[4])+'</div>'
	                        +'</div>'
	                        +'<div class="table-cell _15">'
	                        
	                        +(proposta[5]==('Selecionado')?'<div class="status-wrapper factura"><div class="status-text">SELECIONADO</div></div>':'')
	                        +(proposta[5]==('Rejeitado'||'Cancelado')?'<div class="status-wrapper cancelado"><div class="status-text">REJEITADO</div></div>':'')
                            +(proposta[5]==('Pago'||'Entregue')?'<div  class="status-wrapper pago"> <div class="status-text">PAGO</div></div>':'')
                            +(proposta[5]==('Pendente')?'<div  class="status-wrapper nao-pago"><div class="status-text">PENDENTE</div></div>':'')
                         
	                        +'</div>'
	                        +'</a>'
	                        +'<div class="table-row-action-button-wrapper">'
	                        +'<a href="#" class="table-action-button w-inline-block">'
	                        +'<div class="icon _3-dots"><img width="12" alt="" src="../../../images/3dots-gray.svg" loading="lazy" class="_3dots"></div>'
	                        +'</a>'
	                        +'<div class="flyout-menu-wrapper table-actions-flyout">'
	                        +'<div class="flyout-menu-content in-table">'
	                        +'<a href="#" class="menu-item w-inline-block">'
	                        +'<div class="menu-icon-wrapper">'
	                        +'<div class="icon menu-left-icon">'
	                        +'<div class="main-font-icon">visibility</div>'
	                        +'</div>'
	                        +'</div>'
	                        +'<div class="button-text">Visualizar</div>'
	                        +'</a>'
	                        +'<a href="#" class="menu-item w-inline-block">'
	                        +'<div class="menu-icon-wrapper">'
	                        +'<div class="icon menu-left-icon">'
	                        +'<div class="main-font-icon">edit</div>'
	                        +'</div>'
	                        +'</div>'
	                        +'<div class="button-text">Editar</div>'
	                        +'</a>'
	                        +'<a href="#" class="menu-item w-inline-block">'
	                        +'<div class="menu-icon-wrapper">'
	                        +'<div class="icon menu-left-icon">'
	                        +'<div class="main-font-icon">Delete</div>'
	                        +'</div>'
	                        +'</div>'
	                        +'<div class="button-text">Eliminar</div>'
	                        +'</a>'
	                        +'</div>'
	                        +'</div>'
	                        +'</div>'
	                        +'</div>'
						
								        
			        $('#evx').html(htmle);  	
	
    	     
    	    	   });}else{$('#evx').html('<div class="card-item-2 name">'+
     	                     '<div class="text-block" >Sem Registro</div>'+
	                     '</div>')
	    	   }
    	     	 
    	       
    	        }
    	        
    	        
    	    });
    	 
    
  
    }
	
   
   function converteData(dataStr) {
	    // Converte a string de data para um objeto Date
	    var date = new Date(dataStr);

	    // Obtém o dia, mês e ano
	    var dia = ('0' + date.getDate()).slice(-2);
	    var mes = ('0' + (date.getMonth() + 1)).slice(-2); // getMonth() é zero-based
	    var ano = date.getFullYear();

	    // Formata a data no formato DD/MM/YYYY
	    return dia + '/' + mes + '/' + ano;
	}
  
   </script>
</body>
</html>