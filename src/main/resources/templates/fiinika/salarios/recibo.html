<!DOCTYPE html><!--  Last Published: Mon Jul 08 2024 14:53:42 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="66893fe6c0bff26f3865db30" data-wf-site="667ada12e2b008b7d4b9eee9">
<head>
  <meta charset="utf-8">
  <title>RECIBO</title>
  <meta content="RECIBO" property="og:title">
  <meta content="RECIBO" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/css/components.css" rel="stylesheet" type="text/css">
  <link href="/css/fiinika-comercial-app.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Inter:300,regular,500,600,700","Barlow:100,200,300,regular,500,600,700,800,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="/images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="relatorio-main-div w-clearfix" th:each="vencimento, interator: ${vencimento}">
    <div class="div-block-140 w-clearfix">
      <div class="logo-relatorio"></div>
    </div>
    <div class="div-block-140">
      <h3 class="heading-4">Recibo de Vencimentos</h3>
      <div class="dados-preliminares w-clearfix">
        <div class="parte-1-copy">
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Dias úteis</div>
            <div class="text-block-123-copy">[[${vencimento.days_worked}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Horas trabalhadas</div>
            <div class="text-block-123-copy">[[${vencimento.hours_worked}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Ausências</div>
            <div class="text-block-123-copy">00</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Vencimento/hora</div>
            <div class="text-block-123-copy">[[${vencimento.cost_per_hour}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Vencimento liquido</div>
            <div class="text-block-123-copy">[[${vencimento.gross_salary}]]</div>
          </div>
        </div>
        <div class="parte-6">
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Nome</div>
            <div class="text-block-123-copy">[[${vencimento.name}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Nº Colaborador</div>
            <div class="text-block-123-copy">[[${vencimento.funcionario_id}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Categoria</div>
            <div class="text-block-123-copy">[[${vencimento.category_name}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Periodo</div>
            <div class="text-block-123-copy">[[${#dates.format(vencimento.start_date, 'dd/MM/yyyy')}]] - [[${#dates.format(vencimento.end_date, 'dd/MM/yyyy')}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Data de pagamento</div>
            <div class="text-block-123-copy">[[${#dates.format(vencimento.end_date, 'dd/MM/yyyy')}]]</div>
          </div>
        </div>
      </div>
    </div>
    <div class="clo">
      <div class="main-lead-content-2 w-clearfix">
        <div class="cod">COD</div>
        <div class="retribuicoes">RETRIBUIÇÕES</div>
        <div class="valor-2">Valor <br></div>
      </div>
    <span id="retributions-list">
      <!-- RETRIBUTIONS GO HERE -->
    </span>  
      <div class="reuni-content w-clearfix">
        <div class="retribuicoes-total">TOTAL RETRIBUIÇÕES</div>
        <div class="valor-2 bold" id="total_ret">[[${vencimento.total_retributions}]]<br></div>
      </div>
    </div>
    <div class="clo">
    <div class="main-lead-content-2 w-clearfix">
        <div class="cod">COD</div>
        <div class="retribuicoes">DEDUÇÕES</div>
        <div class="valor-2">Valor <br></div>
    </div>
    <span id="deductions-list">
      <!-- DEDUCTIONS GO HERE -->
    </span>  
      <div class="reuni-content w-clearfix">
        <div class="retribuicoes-total">TOTAL DEDUÇÕES</div>
        <div class="valor-2 bold" id="total_ded">[[${vencimento.total_deductions}]]<br></div>
      </div>
    </div>
    <div class="w-clearfix">
      <div class="div-block-138 w-clearfix">
        <div class="totais">
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Total deduções</div>
            <div class="text-block-123-copy" id="total_ded">[[${vencimento.total_deductions}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Total retribuições</div>
            <div class="text-block-123-copy" id="total_ret">[[${vencimento.total_retributions}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Total a receber (KZ)</div>
            <div class="text-block-123-copy" id="total_kwanza">[[${vencimento.total_salary_kwanza}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Total a receber (€)</div>
            <div class="text-block-123-copy" id="total_euro">[[${vencimento.total_salary_euro}]]</div>
          </div>
          <div class="div-block-139 w-clearfix">
            <div class="text-block-141">Total a receber ($)</div>
            <div class="text-block-123-copy" id="total_dollar">[[${vencimento.total_salary_dollar}]]</div>
          </div>
        </div>
      </div>
      <!-- Hidden inputs for storing data and total values -->
      					  
						  <input id="retribution_ids" type="hidden" name="retributions" th:value="${vencimento.retributions}">						  
						  <input id="deduction_ids" type="hidden" name="deductions" th:value="${vencimento.deductions}">
						  <input type="hidden" id="absence_fee" name="absence_fee" th:value="${vencimento.absence_fee}">
						  <input type="hidden" id="irt_fee" name="irt_fee" th:value="${vencimento.irt_fee}">
						  <input type="hidden" id="inss" name="inss" th:value="${vencimento.inss}">						
						  <input type="hidden" id="total_retributions" name="total_retributions" th:value="${vencimento.total_retributions}">
						  <input type="hidden" id="total_deductions" name="total_deductions" th:value="${vencimento.total_deductions}">
						  <input type="hidden" id="added_retributions" name="added_retributions" th:value="${vencimento.added_retributions}"/>
						  <input type="hidden" id="added_deductions" name="added_deductions" th:value="${vencimento.added_deductions}"/>
      
      
      <div class="div-block-136">
        <div>Declaro que recebi o montante que consta neste recibo</div>
        <div class="div-block-137"></div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=667ada12e2b008b7d4b9eee9" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/fiinika-comercial-app.js" type="text/javascript"></script>

  <script th:inline="javascript">
      
          const retributionIds = JSON.parse(document.getElementById('retribution_ids').value || '[]');
		  const added_retributionIds = JSON.parse(document.getElementById('added_retributions').value || '[]');
          const deductionIds = JSON.parse(document.getElementById('deduction_ids').value || '[]');		  
		  const added_deductionIds = JSON.parse(document.getElementById('added_deductions').value || '[]');
  
          var retribuicoes = /*[[${retribuicoes}]]*/ 'default';
          var deducoes = /*[[${deducoes}]]*/ 'default';
          /*<![CDATA[*/        
    	  var url = "https://" + window.location.hostname + "/app/pdf/recibo.php?fact=" + [[${id_aux}]];
    	  window.location.href = url;
    		/*]]>*/
    	  
    	  
          // Function to format currency
          function formatCurrency(value) {
              return 'KZ '+value.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
          }
  
         
          // Initialize retributions
          retributionIds.forEach(item => {
              const retribution = retribuicoes.find(r => r.id == item.id);
              if (retribution) {
                  const html = `<div class="reuni-content-copy w-clearfix">
							        <div class="cod">R0${retribution.id}</div>
							        <div class="retribuicoes">${retribution.name}</div>
							        <div class="valor-2">${formatCurrency(item.value)}<br></div>
							      </div>`;
                  document.getElementById('retributions-list').insertAdjacentHTML('beforeend', html);
              }
          });
          
          
		// Initialize added_retributions
        added_retributionIds.forEach(item => {
                            
                const html = `<div class="reuni-content-copy w-clearfix">
						        <div class="cod">R0${item.id}</div>
						        <div class="retribuicoes">${item.name}</div>
						        <div class="valor-2">${formatCurrency(item.value)}<br></div>
						      </div>`;
                document.getElementById('retributions-list').insertAdjacentHTML('beforeend', html);
            
        });
  
          // Initialize deductions
          deductionIds.forEach(item => {
              const deduction = deducoes.find(d => d.id == item.id);
              if (deduction) {
                  const html =  `<div class="reuni-content-copy w-clearfix">
							        <div class="cod">DED0${deduction.id}</div>
							        <div class="retribuicoes">${deduction.name}</div>
							        <div class="valor-2">${formatCurrency(item.value)}<br></div>
							      </div>`;
                  document.getElementById('deductions-list').insertAdjacentHTML('beforeend', html);
              }
          });
		  
		  // Initialize deductions
           added_deductionIds.forEach(item => {
			
                   const html = `<div class="reuni-content-copy w-clearfix">
							        <div class="cod">R0${item.id}</div>
							        <div class="retribuicoes">${item.name}</div>
							        <div class="valor-2">${formatCurrency(item.value)}<br></div>
							      </div>`;
                   document.getElementById('deductions-list').insertAdjacentHTML('beforeend', html);
               
           });
		  
		  
        // DEFAULT DEDUCTIONS 
        
          const absenceFeeValue = document.getElementById('absence_fee').value || "0.00 KZ";
          const irtFeeValue = document.getElementById('irt_fee').value || "0.00 KZ";
          const inssFeeValue = document.getElementById('inss').value || "0.00 KZ";
          
        defaultDeductions(0, "INSS (3%)", inssFeeValue);
        defaultDeductions(0, "IRT", irtFeeValue);
        defaultDeductions(0, "Ausências (faltas)", absenceFeeValue);
        
		  function defaultDeductions(id, name, value){

			if(value !== '0.00 KZ'){
	          const html = `<div class="reuni-content-copy w-clearfix">
						        <div class="cod">DED0${id}</div>
						        <div class="retribuicoes">${name}</div>
						        <div class="valor-2">${value}<br></div>
						      </div>`;
			 document.getElementById('deductions-list').insertAdjacentHTML('beforeend', html);
		  	}
		  }
  
        
  </script>
  
  </body>
</html>