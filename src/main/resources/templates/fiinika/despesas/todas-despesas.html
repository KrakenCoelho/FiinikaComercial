<!DOCTYPE html><!--  Last Published: Wed Jun 26 2024 14:31:33 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="667ada12e2b008b7d4b9ef6b" data-wf-site="667ada12e2b008b7d4b9eee9">
<head th:insert="/fragments/header :: header"></head>
<body>
  <div class="mother-div _1">
    <div class="page-content-wrapper">
    <div th:insert="/fragments/menuAdmin :: menuAdmin"></div>
      <div class="content _2">
        <section class="container">
          <div class="top-section-navigation">
            <a href="javascript:history.back()" class="seta-para-tras w-inline-block">
              <div class="text-block-129">q</div>
            </a>
            <div class="titulo">
              <div class="text-block-130">Despesas<br></div>
            </div>
            <div class="bot-o-ou-menu">
              <a href="/fiinika/despesas/criar-despesa" class="botao w-button">Registar Despesa</a>
            </div>
          </div>
          <div class="div-block-8"></div>
          <div>
            <div class="w-form">
              <form id="email-form" name="email-form" data-name="Email Form" method="get" data-wf-page-id="667ada12e2b008b7d4b9ef6b" data-wf-element-id="ecaf911d-b215-a5df-257a-1f8190c362b4">
                <div class="table">
                  <div class="table-utility-row">
                    <div class="form-field-wrapper wrap-search _10">
                      <div class="search-field-wrapper"><input class="form-search-field w-input pesquisa" maxlength="256" name="search" data-name="search" placeholder="" type="text" id="search">
                        <div class="search-icon">
                          <div class="icon">
                            <div class="main-font-icon smaller-icon">x</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="table-main-button-wrapper">
                      <div class="button main">
                        <div class="left-icon-wrapper">
                          <div class="icon left-icon">
                            <div class="main-font-icon">add</div>
                          </div>
                        </div>
                        <div class="button-text">Criar Fatura</div>
                        <a href="#" class="button-link w-inline-block"></a>
                      </div>
                    </div>
                    <div class="filter-date-status-wrapper centered _5">
                    <select id="ano" name="field" data-name="Field" class="form-text-field whitex w-node-d45bdedc-b756-a92e-18e7-dff0151e1938-035930b4 w-select">
                          <option value="">Ano</option>
                          <option th:each="ano,cont: ${anos}" th:value="${ano}">[[${ano}]]</option>                    
                        </select>
                        <select id="mes" name="field-2" data-name="Field 2" class="form-text-field whitex w-node-d45bdedc-b756-a92e-18e7-dff0151e1939-035930b4 w-select">
                          <option value="">Mês</option>
                          <option th:each="mes,cont: ${meses}" th:value="${mes}">[[${T(com.ao.fiinikacomercial.funcoes.Funcoes).MesStatic(mes)}]]</option>     
                        </select>
                        <select id="tipo" name="field-2" data-name="Field 2" class="form-text-field whitex w-node-_6be938b1-6d12-063b-20d3-b2dbadd1669f-035930b4 w-select">
                          <option value="">Fornecedor</option>
                          <option th:each="f,cont: ${fornecedores}" th:value="${f.idFornecedor}">[[${f.nome_fornecedor}]]</option>        
                        </select>                    
                    </div>
                  </div>
                  <div class="table-row cell-label-wrapper">
                    <div class="table-row-content">
                      <div class="cell-label _10">
                        <div class="table-cell-text">Nº</div>
                      </div>
                      <div class="cell-label _25">
                        <div class="table-cell-text">Entidade</div>
                      </div>
                      <div class="cell-label _15">
                        <div class="table-cell-text">criado por</div>
                      </div>
                      <div class="cell-label _15">
                        <div class="table-cell-text">Data</div>
                      </div>
                      <div class="cell-label _20">
                        <div class="table-cell-text">Valor</div>
                      </div>
                      <div class="cell-label _15">
                        <div class="table-cell-text">Documento</div>
                      </div>
                    </div>
                  </div>
                  
                  <div id="div_main">
                  <div  th:each="d,iterator: ${despesas}" class="table-row">
         
                    <a th:with="id=${T(com.ao.fiinikacomercial.funcoes.Funcoes).Codifica(d[0])}" th:href="@{'/fiinika/despesas/despesa-page/' + ${id}}" class="table-row-content item-link w-inline-block">
                      <div class="table-cell _10">
                        <div class="table-cell-text bold">[[${d[4]}]]</div>
                      </div>
                      <div class="table-cell _25 client-cell i">
                        <div class="table-image-wrapper">
                        <img th:src="@{'/imgs/fornecedores/'+ ${d[7]}}" sizes="(max-width: 479px) 100vw, (max-width: 767px) 13vw, 43.984375px"  loading="lazy"  alt="" class="img is--contain"></div>
                        <div class="table-cell-text">[[${d[1]}]]</div>
                      </div>
                      <div class="table-cell _15 i">
                        <div class="table-cell-text">[[${d[6]}]]</div>
                      </div>
                      <div class="table-cell _15">
                        <div class="table-cell-text">[[${d[5]}]]</div>
                      </div>
                      <div class="table-cell _20">
                        <div class="table-cell-text">KZ [[${#numbers.formatDecimal(d[2], 1, 'POINT', 2, 'COMMA')}]]</div>
                      </div>
                      <div class="table-cell _15">
                        <div class="status-wrapper pago hidden">
                          <div class="status-text">Pago</div>
                        </div>
                        <div class="status-wrapper nao-pago hidden">
                          <div class="status-text">Não pago</div>
                        </div>
                        <div class="status-wrapper reembolso hidden">
                          <div class="status-text">Rembolso</div>
                        </div>
                        <div class="status-wrapper cancelado">
                          <div class="status-text">despesa</div>
                        </div>
                      </div>
                    </a>
                    <div class="table-row-action-button-wrapper">
                      
                      <div class="flyout-menu-wrapper table-actions-flyout">
                        <div class="flyout-menu-content in-table">
                          <a href="#" class="menu-item w-inline-block">
                            <div class="menu-icon-wrapper">
                              <div class="icon menu-left-icon">
                                <div class="material-symbols-rounded">visibility</div>
                              </div>
                            </div>
                            <div class="button-text">Visualizar</div>
                          </a>
                          <a href="#" class="menu-item w-inline-block">
                            <div class="menu-icon-wrapper">
                              <div class="icon menu-left-icon">
                                <div class="material-symbols-rounded">Print</div>
                              </div>
                            </div>
                            <div class="button-text">Imprimir</div>
                          </a>
                          <a href="#" class="menu-item w-inline-block">
                            <div class="menu-icon-wrapper">
                              <div class="icon menu-left-icon">
                                <div class="material-symbols-rounded">Download</div>
                              </div>
                            </div>
                            <div class="button-text">Descarregar</div>
                          </a>
                          <a href="#" class="menu-item w-inline-block">
                            <div class="menu-icon-wrapper">
                              <div class="icon menu-left-icon">
                                <div class="material-symbols-rounded">Delete</div>
                              </div>
                            </div>
                            <div class="button-text">Eliminar</div>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  </div>
                  
                  <div id="div_documentos"></div>
                  
                </div>
              </form>
              <div class="w-form-done">
                <div>Thank you! Your submission has been received!</div>
              </div>
              <div class="w-form-fail">
                <div>Oops! Something went wrong while submitting the form.</div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
  <div class="not-valid">
    <div class="text-block-116">Dimensão de ecrã não suportada...</div>
  </div>
  <div class="close-flyout"></div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=667ada12e2b008b7d4b9eee9" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/fiinika-comercial-app.js" type="text/javascript"></script>
   <script type="text/javascript">
	
  $('.form-text-field').change(
          function() {
        	  
        	  if($("#ano").val()== "" && $("#mes").val()== "" && $("#tipo").val() == ""){
        		  $("#div_main").css("display","block")
    	    	  $("#div_documentos").css("display","none")
        		  return
        	  }
  	  
              $.getJSON("/ajax/docs_despesas", {
            	  ano: $("#ano").val(),
                  mes: $("#mes").val(),
                  tipo: $("#tipo").val(),
                  ajax : 'true'
              }, function(data) {     
                 
    	          var html = '',i, div_tipo = '';
    	          var len = data.length;
    	        console.log(data)
    	    if(len>0){	
    	    	  $("#div_main").css("display","none")
    	    	  $("#div_documentos").css("display","block")
    	    	  
    	    	for(i=0; i < data[0].length; i++){
    	    	   
    	    		
    	       html +='<div class="table-row">'+
                        '<label class="w-checkbox table-checkbox-wrapper">'+
                          '<div class="w-checkbox-input w-checkbox-input--inputType-custom table-checkbox"></div><input type="checkbox" name="checkbox-2" id="checkbox-2" data-name="Checkbox 2" style="opacity:0;position:absolute;z-index:-1"><span class="checkbox-lable hidden w-form-label" for="checkbox-2">Checkbox</span>'+
                        '</label>'+
                        '<a  href="/fiinika/despesas/despesa-page/'+data[1][i]+'" class="table-row-content item-link w-inline-block">'+                
                          '<div class="table-cell _10">'+
                            '<div class="table-cell-text bold">'+data[0][i][4]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _25 client-cell i">'+
                            '<div class="table-image-wrapper">'+
                            '<img  src="/imgs/fornecedores/'+data[0][i][7]+'"  sizes="(max-width: 479px) 100vw, (max-width: 767px) 13vw, 43.984375px"  loading="lazy"  alt="" class="img is--contain"></div>'+
                            '<div class="table-cell-text">'+data[0][i][1]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15 i">'+
                            '<div class="table-cell-text">'+data[0][i][6]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15">'+
                            '<div class="table-cell-text">'+data[0][i][5]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _20">'+
                            '<div class="table-cell-text">KZ '+data[0][i][2]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15">'+
                            '<div class="status-wrapper pago hidden">'+
                              '<div class="status-text">Pago</div>'+
                            '</div>'+
                            '<div class="status-wrapper nao-pago hidden">'+
                              '<div class="status-text">Não pago</div>'+
                            '</div>'+
                            '<div class="status-wrapper reembolso hidden">'+
                              '<div class="status-text">Rembolso</div>'+
                            '</div>'+
                            '<div class="status-wrapper cancelado">'+
                               '<div class="status-text">despesa</div>'+
                            '</div>'+
                          '</div>'+
                        '</a>'+
                        '<div class="table-row-action-button-wrapper">'+
                         
                          '<div class="flyout-menu-wrapper table-actions-flyout">'+
                            '<div class="flyout-menu-content in-table">'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">visibility</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Visualizar</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Print</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Imprimir</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Download</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Descarregar</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Delete</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Eliminar</div>'+
                              '</a>'+
                            '</div>'+
                          '</div>'+
                        '</div>'+                        
                      '</div>'
    	    		  
    	    		
    	    	}
    	    	 
    	          $('#div_documentos').html(html);                                   
    	     }else{    	    	
    			  $('#div_documentos').html('Não foram encontrados documentos');     
    			}
  				
  			
              });
          });
  //============================ POR CODIGO DA DESPESA
  $('.pesquisa').keyup(function(){       
        	  
        	  if($(this).val() == ""){
        		  $("#div_main").css("display","block")
    	    	  $("#div_documentos").css("display","none")
        		  return
        	  }
  	  
              $.getJSON("/ajax/docs_despesas_pesquisa", {
            	  nome: $(this).val(),
                  ajax : 'true'
              }, function(data) {     
                 
    	          var html = '',i, div_tipo = '';
    	          var len = data.length;
    	        console.log(data)
    	    if(len>0){	
    	    	  $("#div_main").css("display","none")
    	    	  $("#div_documentos").css("display","block")
    	    	  
    	    	for(i=0; i < data[0].length; i++){
    	    	   
    	    		
    	       html +='<div class="table-row">'+
                        '<label class="w-checkbox table-checkbox-wrapper">'+
                          '<div class="w-checkbox-input w-checkbox-input--inputType-custom table-checkbox"></div><input type="checkbox" name="checkbox-2" id="checkbox-2" data-name="Checkbox 2" style="opacity:0;position:absolute;z-index:-1"><span class="checkbox-lable hidden w-form-label" for="checkbox-2">Checkbox</span>'+
                        '</label>'+
                        '<a  href="/fiinika/despesas/despesa-page/'+data[1][i]+'" class="table-row-content item-link w-inline-block">'+                
                          '<div class="table-cell _10">'+
                            '<div class="table-cell-text bold">'+data[0][i][4]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _25 client-cell i">'+
                            '<div class="table-image-wrapper">'+
                            '<img  src="/imgs/fornecedores/'+data[0][i][7]+'"  sizes="(max-width: 479px) 100vw, (max-width: 767px) 13vw, 43.984375px"  loading="lazy"  alt="" class="img is--contain"></div>'+
                            '<div class="table-cell-text">'+data[0][i][1]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15 i">'+
                            '<div class="table-cell-text">'+data[0][i][6]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15">'+
                            '<div class="table-cell-text">'+data[0][i][5]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _20">'+
                            '<div class="table-cell-text">KZ '+data[0][i][2]+'</div>'+
                          '</div>'+
                          '<div class="table-cell _15">'+
                            '<div class="status-wrapper pago hidden">'+
                              '<div class="status-text">Pago</div>'+
                            '</div>'+
                            '<div class="status-wrapper nao-pago hidden">'+
                              '<div class="status-text">Não pago</div>'+
                            '</div>'+
                            '<div class="status-wrapper reembolso hidden">'+
                              '<div class="status-text">Rembolso</div>'+
                            '</div>'+
                            '<div class="status-wrapper cancelado">'+
                               '<div class="status-text">despesa</div>'+
                            '</div>'+
                          '</div>'+
                        '</a>'+
                        '<div class="table-row-action-button-wrapper">'+
                          '<a href="#" class="table-action-button w-inline-block">'+
                            '<div class="icon _3-dots"><img loading="lazy" width="12" src="/images/3dots-gray.svg" alt="" class="_3dots"></div>'+
                          '</a>'+
                          '<div class="flyout-menu-wrapper table-actions-flyout">'+
                            '<div class="flyout-menu-content in-table">'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">visibility</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Visualizar</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Print</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Imprimir</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Download</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Descarregar</div>'+
                              '</a>'+
                              '<a href="#" class="menu-item w-inline-block">'+
                                '<div class="menu-icon-wrapper">'+
                                  '<div class="icon menu-left-icon">'+
                                    '<div class="main-font-icon">Delete</div>'+
                                  '</div>'+
                                '</div>'+
                                '<div class="button-text">Eliminar</div>'+
                              '</a>'+
                            '</div>'+
                          '</div>'+
                        '</div>'+                        
                      '</div>'
    	    		  
    	    		
    	    	}
    	    	 
    	          $('#div_documentos').html(html);                                   
    	     }else{    	    	
    			  $('#div_documentos').html('Não foram encontrados documentos');     
    			}
  				
  			
              });
          });
  
  </script>
</body>
</html>